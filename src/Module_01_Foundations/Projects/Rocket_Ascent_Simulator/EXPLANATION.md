# Technical Explanation: 3D Rocket Ascent Physics

## Core Physics Concepts

### 1. Newton's Second Law in Non-Inertial Frame
The motion of the rocket is governed by the sum of forces acting upon it:
$$ \sum \vec{F} = m \vec{a} $$

Rearranging for acceleration (which we need for our integrator):
$$ \vec{a} = \frac{\vec{F}_{thrust} + \vec{F}_{gravity} + \vec{F}_{drag}}{m(t)} $$

Note that mass $m(t)$ is not constant; it decreases significantly as propellant is expelled.

### 2. The Forces

#### Gravity ($F_g$)
We do not assume constant gravity ($g = 9.81$). Instead, we use Newton's Law of Universal Gravitation to model the decrease in gravity as the rocket climbs away from Earth:
$$ \vec{g}(\vec{r}) = -\frac{GM}{|\vec{r}|^3} \vec{r} $$
Where:
*   $G$: Gravitational Constant
*   $M$: Mass of Earth
*   $\vec{r}$: Position vector from Earth's center

#### Atmospheric Drag ($F_d$)
Drag opposes the velocity vector. We calculate the magnitude using the drag equation:
$$ F_d = \frac{1}{2} \rho(h) v^2 C_d A $$
Where:
*   $\rho(h)$: Air density at altitude $h$. Modeled as $\rho_0 e^{-h/H}$ (Exponential Atmosphere).
*   $v$: Velocity magnitude.
*   $C_d$: Drag Coefficient (assumed constant 0.75 for this demo, though real rockets vary $C_d$ with Mach number).
*   $A$: Cross-sectional area.

#### Thrust ($F_t$)
Thrust is generated by the expulsion of exhaust gases.
$$ \vec{F}_{thrust} = F_{mag} \cdot \hat{u}_{thrust} $$
For this simulation, we implement a basic **Gravity Turn**:
1.  **Vertical Ascent:** Initially thrust purely "Up" (radially outward).
2.  **Pitchover:** At low velocity, we apply a small "nudge" Eastward.
3.  **Gravity Turn:** As speed increases, we align thrust mostly with the velocity vector ($\vec{v}$). Gravity naturally curves the trajectory downward, allowing the rocket to gain horizontal orbital speed efficiently.

### 3. Numerical Integration (RK4)
Computers cannot solve continuous differential equations perfectly. We discretize time into steps ($\Delta t$).

**Why RK4?**
Standard **Euler Integration** ($y_{new} = y + y' \cdot dt$) assumes the rate of change is constant across the time step. This creates large errors in orbital mechanics (energy drift).
**Runge-Kutta 4 (RK4)** calculates the slope at the beginning, middle (twice), and end of the step, taking a weighted average. This is the industry standard for non-stiff orbital simulations.

### 4. Code Architecture (`simulation.py`)
*   **`RocketParams` (Data Class):** A clean container for vehicle configuration (Mass, ISP, Thrust).
*   **`Environment` (Static Class):** Decouples the "World" physics (Earth mass, atmosphere) from the "Vehicle" physics.
*   **`RocketSimulator` (Class):**
    *   `_derivatives()`: The physics engine. Calculates $\vec{a}$ and $dm/dt$.
    *   `step_rk4()`: The math engine. Solves the ODEs.
    *   `run()`: The game loop.

